---
title: Go语言入门：11、指针
tags:
  - Go
  - GoLang
  - 指针
categories:
  - Go
  - Go语言基础
date: 2018-12-15 23:01:34
---

# 一、指针的定义和使用
变量前使用取地址符 & 会返回相应变量的内存地址。
```
var a int = 10   
fmt.Printf("变量的地址: %x\n", &a  )
```
一个指针变量指向了一个值的内存地址。
```
var ip *int        /* 指向整型*/
var fp *float32    /* 指向浮点型 */
```

在指针类型前面加上 * 号（前缀）来获取指针所指向的内容。
```
package main

import "fmt"

func main() {
   var a int= 20   /* 声明实际变量 */
   var ip *int        /* 声明指针变量 */

   ip = &a  /* 指针变量的存储地址 */

   fmt.Printf("a 变量的地址是: %x\n", &a  )

   /* 指针变量的存储地址 */
   fmt.Printf("ip 变量储存的指针地址: %x\n", ip )

   /* 使用指针访问值 */
   fmt.Printf("*ip 变量的值: %d\n", *ip )
}
```
执行输出结果为：
```
a 变量的地址是: 20818a220
ip 变量储存的指针地址: 20818a220
*ip 变量的值: 20
```

# 二、指针数组
声明整型指针数组：
```
var ptr [MAX]*int
```
将三个整数存储在指针数组中：
```
package main

import "fmt"

const MAX int = 3

func main() {
   a := []int{1,10,100}
   var i int
   var ptr [MAX]*int

   for  i = 0; i < MAX; i++ {
      ptr[i] = &a[i] /* 整数地址赋值给指针数组 */
   }

   for  i = 0; i < MAX; i++ {
      fmt.Printf("a[%d] = %d\n", i,*ptr[i] )
   }
}
```
执行输出结果为：
```
a[0] = 1
a[1] = 10
a[2] = 100
```

# 三、指向指针的指针
如果一个指针变量存放的又是另一个指针变量的地址，则称这个指针变量为指向指针的指针变量。
指向指针的指针变量声明格式如下：
```
var ptr **int
```

访问指向指针的指针变量值需要使用两个 * 号，如：
```
package main

import "fmt"

func main() {

   var a int
   var ptr *int
   var pptr **int

   a = 100

   /* 指针 ptr 地址 */
   ptr = &a

   /* 指向指针 ptr 地址 */
   pptr = &ptr

   /* 获取 pptr 的值 */
   fmt.Printf("变量 a = %d\n", a )
   fmt.Printf("指针变量 *ptr = %d\n", *ptr )
   fmt.Printf("指向指针的指针变量 **pptr = %d\n", **pptr)
}
```
执行输出结果为：
```
变量 a = 100
指针变量 *ptr = 100
指向指针的指针变量 **pptr = 100
```